<mat-card class="result-card">
    <mat-card-header>
        <mat-card-title>
            <span *ngIf="parsedAgenda">{{ parsedAgenda.title }}</span>
            <span *ngIf="!parsedAgenda">Generated Agenda</span>
        </mat-card-title>
        <mat-card-subtitle *ngIf="parsedAgenda">{{ parsedAgenda.summary }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <!-- Structured View -->
        <div *ngIf="parsedAgenda" class="structured-agenda">
            <mat-list>
                <div *ngFor="let item of parsedAgenda.items; let last = last">
                    <mat-list-item class="agenda-item" [class.break-item]="isBreakItem(item.title)">
                        <div class="time-slot" matListItemAvatar [class.break-time]="isBreakItem(item.title)">
                            <span class="time">{{ item.time_slot }}</span>
                        </div>
                        <div matListItemTitle class="item-title">
                            <span class="emoji-icon">{{ getIconForTitle(item.title) }}</span>
                            {{ item.title }}
                            <span class="duration-badge">{{ item.duration }}</span>
                        </div>
                        <div matListItemLine class="item-desc">{{ item.description }}</div>
                    </mat-list-item>
                    <mat-divider *ngIf="!last"></mat-divider>
                </div>
            </mat-list>
        </div>

        <!-- Fallback Raw View -->
        <div *ngIf="!parsedAgenda" class="agenda-content">
            {{ rawContent }}
        </div>
    </mat-card-content>

    <mat-card-actions align="end">
        <button mat-stroked-button color="primary" (click)="downloadIcs()">
            <mat-icon>event</mat-icon> Download ICS
        </button>
        <button mat-stroked-button color="primary" (click)="copyToClipboard()">
            <mat-icon>content_copy</mat-icon> Copy to Clipboard
        </button>
    </mat-card-actions>
</mat-card>